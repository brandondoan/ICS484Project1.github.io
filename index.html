<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Plotly.js -->
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
   <link rel="stylesheet" href="style.css">
</head>
<body>
       <header>
            <button class="button button1"style="float: right" type="button" onclick="alert('Visualization by: Brandon Doan\nData created & compiled by: Robin Wilson\nLibraries used: Plot.ly ')">About this visualization</button> 
           <h2><center><font face="Arial" size="20" color="black">Cholera Deaths in London 1854 </font></center></h2>
           
        </header>
    <div id="thevizcolumn" style="width:100%; height:1080px; float: left; background-color:rgb(255, 255, 255);">
      <div style="width:100%; height:1080px; float: left; margin: auto;">
      <div id="table1" style="width:100%;height:1080px;" ></div>
	  </div>
	</div>
	
    
    <div style="width:100%; height:960px; float: left;">
        <div id="plot1" style="width:100%;height:900px; margin: auto;" ></div>
	</div>
	
	<div style="width:100%; height:400px; float: left; margin: auto;">
		<div id="naplesTable" style="width:100%;height:400px;" ></div>
	</div>


	<div style="width:100%; height:900px; float: left; margin: auto;">
		<div id="naplesBar" style="width:100%;height:900px;" ></div>
	</div>
    
    <script>

        var deaths = [
	{
		"Date": "19-Aug-1854",
		"Attack": 1,
		"Death": 1
	},
	{
		"Date": "20-Aug-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "21-Aug-1854",
		"Attack": 1,
		"Death": 2
	},
	{
		"Date": "22-Aug-1854",
		"Attack": 0,
		"Death": 0
	},
	{
		"Date": "23-Aug-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "24-Aug-1854",
		"Attack": 1,
		"Death": 2
	},
	{
		"Date": "25-Aug-1854",
		"Attack": 0,
		"Death": 0
	},
	{
		"Date": "26-Aug-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "27-Aug-1854",
		"Attack": 1,
		"Death": 1
	},
	{
		"Date": "28-Aug-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "29-Aug-1854",
		"Attack": 1,
		"Death": 1
	},
	{
		"Date": "30-Aug-1854",
		"Attack": 8,
		"Death": 2
	},
	{
		"Date": "31-Aug-1854",
		"Attack": 56,
		"Death": 3
	},
	{
		"Date": "1-Sep-1854",
		"Attack": 143,
		"Death": 70
	},
	{
		"Date": "2-Sep-1854",
		"Attack": 116,
		"Death": 127
	},
	{
		"Date": "3-Sep-1854",
		"Attack": 54,
		"Death": 76
	},
	{
		"Date": "4-Sep-1854",
		"Attack": 46,
		"Death": 71
	},
	{
		"Date": "5-Sep-1854",
		"Attack": 36,
		"Death": 45
	},
	{
		"Date": "6-Sep-1854",
		"Attack": 20,
		"Death": 37
	},
	{
		"Date": "7-Sep-1854",
		"Attack": 28,
		"Death": 32
	},
	{
		"Date": "8-Sep-1854",
		"Attack": 12,
		"Death": 30
	},
	{
		"Date": "9-Sep-1854",
		"Attack": 11,
		"Death": 24
	},
	{
		"Date": "10-Sep-1854",
		"Attack": 5,
		"Death": 18
	},
	{
		"Date": "11-Sep-1854",
		"Attack": 5,
		"Death": 15
	},
	{
		"Date": "12-Sep-1854",
		"Attack": 1,
		"Death": 6
	},
	{
		"Date": "13-Sep-1854",
		"Attack": 3,
		"Death": 13
	},
	{
		"Date": "14-Sep-1854",
		"Attack": 0,
		"Death": 6
	},
	{
		"Date": "15-Sep-1854",
		"Attack": 1,
		"Death": 8
	},
	{
		"Date": "16-Sep-1854",
		"Attack": 4,
		"Death": 6
	},
	{
		"Date": "17-Sep-1854",
		"Attack": 2,
		"Death": 5
	},
	{
		"Date": "18-Sep-1854",
		"Attack": 3,
		"Death": 2
	},
	{
		"Date": "19-Sep-1854",
		"Attack": 0,
		"Death": 3
	},
	{
		"Date": "20-Sep-1854",
		"Attack": 0,
		"Death": 0
	},
	{
		"Date": "21-Sep-1854",
		"Attack": 2,
		"Death": 0
	},
	{
		"Date": "22-Sep-1854",
		"Attack": 1,
		"Death": 2
	},
	{
		"Date": "23-Sep-1854",
		"Attack": 1,
		"Death": 3
	},
	{
		"Date": "24-Sep-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "25-Sep-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "26-Sep-1854",
		"Attack": 1,
		"Death": 2
	},
	{
		"Date": "27-Sep-1854",
		"Attack": 1,
		"Death": 0
	},
	{
		"Date": "28-Sep-1854",
		"Attack": 0,
		"Death": 2
	},
	{
		"Date": "29-Sep-1854",
		"Attack": 0,
		"Death": 1
	}
]
 var naplesData = [
	{
		"age": "0-1",
		"male": 8.2,
		"female": 8.9
	},
	{
		"age": "2-5",
		"male": 14,
		"female": 14.7
	},
	{
		"age": "6-10",
		"male": 12.1,
		"female": 11.2
	},
	{
		"age": "11-15",
		"male": 7.8,
		"female": 7.1
	},
	{
		"age": "16-20",
		"male": 7.2,
		"female": 7.2
	},
	{
		"age": "21-40",
		"male": 12.1,
		"female": 11.8
	},
	{
		"age": "41-60",
		"male": 13.7,
		"female": 12.9
	},
	{
		"age": "61-80",
		"male": 20.5,
		"female": 20.5
	},
	{
		"age": "over 80",
		"male": 39.6,
		"female": 37.8
	}
]

var dateOfDeaths = []
var attacks = []
var deathsByDay = []
var deathTotal = [deaths[0].Death]
var attackTotal = [deaths[0].Attack]
var naplesAge = []
var naplesFemale = []
var naplesMale = []

var values = [
      dateOfDeaths,
      attacks,
      attackTotal,
      deathsByDay,
      deathTotal]

var data = [{
  type: 'table',
  header: {
    values: [["DATE"], ["Attacks that Day"],
				 ["Total Attacks to Date"], ["Deaths that Day"], ["Total Deaths to Date"]],
    align: ["left", "center"],
    line: {width: 1, color: '#506784'},
    fill: {color: '#119DFF'},
    font: {family: "Arial", size: 12, color: "white"}
  },
  cells: {
    values: values,
    align: ["left", "center"],
    line: {color: "#506784", width: 1},
	 fill: {color: ['#25FEFD', 'white']},
    font: {family: "Arial", size: 11, color: ["#506784"]}
  }
}]

var naplesValues = [
	naplesAge,
	naplesMale,
	naplesFemale
]

for (var i = 0; i <naplesData.length; i++) {
    naplesAge.push(naplesData[i].age)
    naplesMale.push(naplesData[i].male)
    naplesFemale.push(naplesData[i].female)
}

var data2 = [{
  type: 'table',
  header: {
    values: [["Age"], ["Male"],
				 ["Female"]],
    align: ["left", "center"],
    line: {width: 1, color: '#506784'},
    fill: {color: '#119DFF'},
    font: {family: "Arial", size: 12, color: "white"}
  },
  cells: {
    values: naplesValues,
    align: ["left", "center"],
    line: {color: "#506784", width: 1},
	 fill: {color: ['#25FEFD', 'white']},
    font: {family: "Arial", size: 11, color: ["#506784"]}
  }
}]

for (var i = 0; i <deaths.length; i++) {
    dateOfDeaths.push(deaths[i].Date)
    attacks.push(deaths[i].Attack)
    deathsByDay.push(deaths[i].Death)
}

for (var i = 1; i <deaths.length; i++) {
    deathTotal[i] = deathTotal[i-1] + deaths[i].Death
    attackTotal[i] = attackTotal[i-1] + deaths[i].Attack
}
        var trace0 = {
            x: dateOfDeaths,
            y: attacks,
            type: 'scatter',
            name: '# of Attacks',
            line: {
                color: 'rgb(4, 255, 234)',
                width: 3
            }
        };
        var trace1 = {
            x: dateOfDeaths,
            y: deathsByDay,
            type: 'scatter',
            name: '# of Deaths',
            line: {
                color: 'rgb(255, 4, 25)',
                width: 3
             }
        };
        var trace3 = {
            x: dateOfDeaths,
            y: deathTotal,
            type: 'scatter',
            name: 'Cumulative Deaths',
            line: {
                color: 'rgb(255, 4, 255)',
                width: 4
             }
        };
        var trace4 = {
            x: dateOfDeaths,
            y: attackTotal,
            type: 'scatter',
            name: 'Cumulative Attacks',
            line: {
                color: 'rgb(20, 255, 25)',
                width: 4
             }
        };
        data1 = [trace0, trace1, trace3, trace4];



		var trace5 = {
			x: naplesAge,
  			y: naplesMale,
  			name: 'Male',
  			type: 'bar',
			marker: {
    			color: 'rgb(255,96,23)',
    			line: {
      				color: 'rbg(8,48,107)',
      				width: 1.5
    			}
  			}
		};

		var trace6 = {
  			x: naplesAge,
  			y: naplesFemale,
  			name: 'Female',
  			type: 'bar',
			marker: {
    			color: 'rgb(23,182,255)',
    			line: {
      				color: 'rbg(8,48,107)',
      				width: 1.5
    			}
  			}
  
		};

		naplesBarData = [trace5, trace6];

    
       plot1Div = document.getElementById('plot1');
       table1Div = document.getElementById('table1');
	   naplesTableDiv = document.getElementById('naplesTable');
	   naplesBarDiv = document.getElementById('naplesBar');
       var layout = {
           title: "Attacks and deaths over the course of the London Cholera Outbreak of 1854 ",
           yaxis: {rangemode: 'tozero',
           title: '# of people',
           showline: true,
           zeroline: true},
           xaxis: {
              title: 'Date',
              margin: 160,
              tickangle: 45
          }
       };

       var tablelayout = {
           title: "Table for the amount of cholera attacks and deaths by date. (includes cumulative values up to the specified date)",
           yaxis: {rangemode: 'tozero',
          showline: true,
          zeroline: true}
       }

	          var naplesTableLayout = {
           title: "Naples fatality numbers for cholera in the same time period, grouped by men and women in different age groups",
           yaxis: {rangemode: 'tozero',
          showline: true,
          zeroline: true}
       }

	   	naplesBarLayout ={
			   title: "Comparison of gender fatality rates for cholera in Naples, split by age group.",
			barmode: 'group'
		}

        var myChart1=Plotly.plot( plot1Div, data1, layout );
        var myTable1=Plotly.plot( table1Div, data, tablelayout);
		var myNaplesTable=Plotly.plot( naplesTableDiv, data2, naplesTableLayout);
		var myNaplesBar=Plotly.plot( naplesBarDiv, naplesBarData, naplesBarLayout);
        
    </script>
</body>


</html>